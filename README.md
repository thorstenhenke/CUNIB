The program is designed around a state machine, which was implemented as a graph. 

